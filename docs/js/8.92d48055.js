(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"217c":function(a,e,t){},"596e":function(a,e,t){"use strict";var i=t("217c"),r=t.n(i);r.a},c4f0:function(a,e,t){a.exports=t.p+"img/iajoo.f1ccdc49.jpg"},e800:function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{staticClass:"row bg-imagen"},[t("div",{staticClass:"col-lg-8 col-md-12 col-sm-12  col-xs-12 col-12 q-pa-lg column  flex-center "},[a.graficoHoras.mostrar?a._e():t("q-card",{staticStyle:{width:"100%"}},[t("q-skeleton",{attrs:{height:"50vh",width:"100%"}})],1),a.graficoHoras.mostrar?t("chartLinea",{ref:"chartLinea",attrs:{"width-canvas-porcentaje":"100",labels:a.graficoHoras.labels,datasets:a.graficoHoras.datasets,title:a.graficoHoras.titulo,"height-canvas-porcentaje":"40"}}):a._e()],1),t("div",{staticClass:"col-lg-4 col-md-12 col-sm-12  col-xs-12 col-12 column  justify-center"},[a.mostrarTajetaEmpresa?a._e():t("q-card",{staticClass:"q-ma-md"},[t("q-skeleton",{attrs:{width:"100%",height:"23vh"}})],1),a.mostrarTajetaEmpresa?t("q-card",{staticClass:"q-ma-md "},[t("q-card-section",{staticClass:"q-pa-sm q-pl-md"},[t("q-item",{staticClass:"q-pa-none"},[t("q-item-section",{attrs:{avatar:""}},[t("q-avatar",{attrs:{square:"",size:"4.5em"}},[t("q-img",{attrs:{src:a.empresa.foto}})],1)],1),t("q-item-section",[t("q-item-label",{staticClass:"text-h5"},[a._v(" "+a._s(a.empresa.nombre||"No tienes empresa asignada"))]),t("q-item-label",{attrs:{caption:""}},[a._v(" Tu empresa de FCT")])],1)],1)],1),t("q-card-section",{staticClass:" q-pa-none "},[t("q-separator",{attrs:{spaced:"",inset:""}}),t("q-splitter",{scopedSlots:a._u([{key:"before",fn:function(){return[t("q-tabs",{staticClass:"text-secondary",attrs:{vertical:""},model:{value:a.tabEmpresa,callback:function(e){a.tabEmpresa=e},expression:"tabEmpresa"}},[t("q-tab",{attrs:{disable:null===a.empresa.nombre,ripple:!1,name:"Info",label:"Info"}}),t("q-tab",{attrs:{disable:null===a.empresa.nombre,ripple:!1,name:"Compañeros",label:"Estudiantes"}}),a.$q.screen.gt.xs?t("q-tab",{attrs:{disable:null===a.empresa.nombre,ripple:!1,name:"Horario",label:"Horario"}}):a._e()],1)]},proxy:!0},{key:"after",fn:function(){return[t("q-tab-panels",{attrs:{animated:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},model:{value:a.tabEmpresa,callback:function(e){a.tabEmpresa=e},expression:"tabEmpresa"}},[t("q-tab-panel",{staticClass:"column q-pa-none",attrs:{name:"Info"}},[null!==a.empresa.nombre?t("div",[t("div",{staticClass:"column items-center q-pa-xs"},[t("span",{staticClass:"text-h6"},[a._v("Contacto:")]),a._v(a._s(a.empresa.contacto)+"\n                  ")]),t("div",{staticClass:"column q-pa-xs items-center"},[t("span",{staticClass:"text-h6"},[a._v("Dirección:")]),a._v(" "+a._s(a.empresa.direccion)+"\n                  ")])]):a._e(),""===a.empresa.nombre?t("div"):a._e()]),t("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"Compañeros"}},[t("q-list",{staticStyle:{height:"15vh"}},a._l(a.empresa.estudiantes,(function(e){return t("q-item",{key:e.idusuario},[t("q-item-section",[t("q-item-label",[a._v(a._s(e.nombre)+" "+a._s(e.apellidos))]),t("q-item-label",{attrs:{caption:"",lines:"1"}},[a._v(a._s(e.email))])],1)],1)})),1)],1),a.$q.screen.gt.xs?t("q-tab-panel",{staticClass:"q-pa-none",attrs:{name:"Horario"}},[t("q-tabs",{staticClass:"text-grey",attrs:{"active-color":"secondary","indicator-color":"secondary",dense:""},model:{value:a.tabHorario,callback:function(e){a.tabHorario=e},expression:"tabHorario"}},a._l(a.empresa.horarios,(function(a){return t("q-tab",{attrs:{name:a.dia.dia,label:a.dia.dia.substring(0,3)}})})),1),t("q-separator"),t("q-tab-panels",{attrs:{animated:""},model:{value:a.tabHorario,callback:function(e){a.tabHorario=e},expression:"tabHorario"}},a._l(a.empresa.horarios,(function(e){return t("q-tab-panel",{attrs:{name:e.dia.dia}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-5 flex justify-end"},[a._v("\n                        Entrada\n                      ")]),t("div",{staticClass:"col-2"}),t("div",{staticClass:"col-5 flex"},[a._v("\n                        Salida\n                      ")])]),t("div",{staticClass:"row "},[t("div",{staticClass:"text-h6 flex justify-end text-weight-regular  col-5"},[a._v("\n                        "+a._s(a._f("filtroQuitarSegundoHoras")(e.horaEntrada))+"\n\n                      ")]),t("div",{staticClass:"text-h6 text-weight-regular col-2 flex flex-center"},[a._v("-")]),t("div",{staticClass:"text-h6 text-weight-regular  col-5 flex"},[a._v("\n                        "+a._s(a._f("filtroQuitarSegundoHoras")(e.horaSalida))+"\n\n                      ")])])])})),1)],1):a._e()],1)]},proxy:!0}],null,!1,1519569567),model:{value:a.splitterModel,callback:function(e){a.splitterModel=e},expression:"splitterModel"}})],1)],1):a._e(),a.graficoHoras.mostrar?a._e():t("q-card",{staticClass:"q-ma-md"},[t("q-skeleton",{attrs:{width:"100%",height:"23vh"}})],1),a.graficoHoras.mostrar?t("q-card",{staticClass:"q-ma-md "},[t("q-card-section",[t("q-item",{staticClass:"q-pa-none  "},[t("q-item-section",{attrs:{avatar:""}},[t("q-avatar",{attrs:{square:"",size:"4.5em",icon:"far fa-id-badge"}})],1),t("q-item-section",[t("q-item-label",{staticClass:"text-h5"},[a._v("Horas fichadas")])],1)],1)],1),t("q-card-section",{staticClass:"text-grey-9 q-pa-none flex flex-center text-weight-medium",staticStyle:{"font-size":"2em"}},[a._v("\n        "+a._s(a.horasTotalesFichadas)+"/400 Horas\n      ")]),t("q-card-actions",{},[a.horasTotalesFichadas<100?t("q-chip",{attrs:{square:"",color:"grey-7","text-color":"white",label:"Venga a trabajar, que aun te queda"}}):a._e(),a.horasTotalesFichadas>=100&&a.horasTotalesFichadas<300?t("q-chip",{attrs:{square:"",color:"amber-8","text-color":"white",label:"Así se hace, sigue así"}}):a._e(),a.horasTotalesFichadas>=300&&a.horasTotalesFichadas<400?t("q-chip",{attrs:{square:"",color:"blue","text-color":"white",label:"Va va, ya casi acabas"}}):a._e(),a.horasTotalesFichadas>=400?t("q-chip",{attrs:{square:"",color:"green","text-color":"white",label:"Ya has acabado, enhorabuena !"}}):a._e()],1)],1):a._e()],1)])},r=[],s=t("fa84"),o=t.n(s),l=(t("6d67"),t("d25f"),t("28a5"),t("967e")),n=t.n(l),c=t("33e7"),d={components:{chartLinea:c["a"]},name:"Dashboard",data:function(){return{mostrarTajetaEmpresa:!1,graficoHoras:{labels:[],datasets:[],titulo:"Todos los fichajes",mostrar:!1},horasTotalesFichadas:0,tabEmpresa:"Info",tabHorario:null,splitterModel:20,empresa:{nombre:"iajoo",contacto:"iajooo@tresee.app",direccion:"Calle de la Vida Nº45, Marratxi, 07141",foto:t("c4f0"),horarios:[{idempresa_tiene_dia:null,dia:{iddia:1,dia:"LUNES"},horaEntrada:"08:00:00",horaSalida:"16:00:00"},{idempresa_tiene_dia:null,dia:{iddia:2,dia:"MARTES"},horaEntrada:"08:00:00",horaSalida:"16:00:00"},{idempresa_tiene_dia:null,dia:{iddia:3,dia:"MIERCOLES"},horaEntrada:"08:00:00",horaSalida:"16:00:00"},{idempresa_tiene_dia:null,dia:{iddia:4,dia:"JUEVES"},horaEntrada:"07:00:00",horaSalida:"17:00:00"},{idempresa_tiene_dia:null,dia:{iddia:5,dia:"VIERNES"},horaEntrada:"08:00:00",horaSalida:"14:00:00"}],estudiantes:[{idusuario:1,nombre:"Pablo",apellidos:"Escobar",email:"pabloescobar@gmail.com"},{idusuario:2,nombre:"Pepito",apellidos:"Lolo",email:"pepitololo@gmail.com"}]},fichajes:[{idfichaje:1,diaFichaje:"2020/04/27",horaEntrada:"09:01:12",horaSalida:"17:20:00"},{idfichaje:2,diaFichaje:"2020/04/28",horaEntrada:"09:03:12",horaSalida:"17:05:59"},{idfichaje:3,diaFichaje:"2020/04/29",horaEntrada:"09:23:42",horaSalida:"13:05:59"},{idfichaje:4,diaFichaje:"2020/04/29",horaEntrada:"13:55:12",horaSalida:"17:55:00"},{idfichaje:5,diaFichaje:"2020/04/30",horaEntrada:"09:00:00",horaSalida:"15:00:00"},{idfichaje:6,diaFichaje:"2020/05/04",horaEntrada:"09:23:42",horaSalida:"17:54:40"},{idfichaje:7,diaFichaje:"2020/05/05",horaEntrada:"08:23:42",horaSalida:"18:15:00"},{idfichaje:8,diaFichaje:"2020/05/06",horaEntrada:"09:02:42",horaSalida:"12:50:50"},{idfichaje:9,diaFichaje:"2020/05/06",horaEntrada:"15:00:00",horaSalida:"15:45:10"},{idfichaje:10,diaFichaje:"2020/05/06",horaEntrada:"16:23:42",horaSalida:"17:55:55"},{idfichaje:11,diaFichaje:"2020/05/07",horaEntrada:"09:01:35",horaSalida:"17:30:00"},{idfichaje:12,diaFichaje:"2020/05/08",horaEntrada:"08:15:30",horaSalida:"13:45:00"},{idfichaje:13,diaFichaje:"2020/05/08",horaEntrada:"14:30:45",horaSalida:"17:25:52"},{idfichaje:14,diaFichaje:"2020/05/11",horaEntrada:"09:05:03",horaSalida:"15:10:10"},{idfichaje:15,diaFichaje:"2020/05/11",horaEntrada:"16:23:42",horaSalida:"19:50:20"},{idfichaje:16,diaFichaje:"2020/05/12",horaEntrada:"09:01:12",horaSalida:"17:20:00"},{idfichaje:17,diaFichaje:"2020/05/13",horaEntrada:"09:10:15",horaSalida:"17:10:10"},{idfichaje:18,diaFichaje:"2020/05/14",horaEntrada:"08:20:50",horaSalida:"17:05:30"},{idfichaje:19,diaFichaje:"2020/05/15",horaEntrada:"09:01:30",horaSalida:"17:30:30"},{idfichaje:20,diaFichaje:"2020/05/16",horaEntrada:"09:04:32",horaSalida:"16:20:50"}]}},created:function(){var a=this;return o()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!=a.empresa.horarios&&a.empresa.horarios.length>0?(a.empresa.horarios.length>0&&(a.tabHorario=a.empresa.horarios[0].dia.dia),a.mostrarTajetaEmpresa=!0):a.mostrarTajetaEmpresa=!0,a.createDataSet();case 2:case"end":return e.stop()}}),e)})))()},methods:{createDataSet:function(){var a=this,e=[],t={data:[],label:"Horas fichadas",borderColor:"#1f8b92",backgroundColor:"rgba(123,233,115,0.21)",fill:!0},i=[];this.fichajes.map((function(t){if(t.horaEntrada&&t.horaSalida){var r=!1;e.forEach((function(a){a===t.diaFichaje&&(r=!0)}));var s={label:null,horasFichadas:null};if(r){var o=i.filter((function(a){return a.label===t.diaFichaje}));o=o[0],o.horasFichadas+=a.getDiffHoras(t.horaEntrada,t.horaSalida)}else e.push(t.diaFichaje),s.label=t.diaFichaje,s.horasFichadas=a.getDiffHoras(t.horaEntrada,t.horaSalida),i.push(s)}})),i.map((function(a){t.data.push(a.horasFichadas)}));var r=0;t.data.map((function(a){r+=parseFloat(a.toFixed(2))})),this.horasTotalesFichadas=parseFloat(r.toFixed(1)),this.graficoHoras.labels=e,this.graficoHoras.datasets=[],this.graficoHoras.datasets.push(t),console.log("HACE EL TRUE"),this.graficoHoras.mostrar=!0},getDiffHoras:function(a,e){var t=a.split(":"),i=new Date;i.setHours(t[0]),i.setMinutes(t[1]),i.setSeconds(t[2]);var r=e.split(":"),s=new Date;return s.setHours(r[0]),s.setMinutes(r[1]),s.setSeconds(r[2]),parseFloat(((s-i)/1e3/3600).toFixed(2))},mostrarNotificacion:function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"indigo",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top-right";this.$q.notify({color:e,message:a,position:i,timeout:5e3,multiLine:t})}},filters:{filtroQuitarSegundoHoras:function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return a.substring(0,e)}}},h=d,m=(t("596e"),t("2877")),p=t("9989"),u=t("f09f"),f=t("293e"),b=t("a370"),q=t("66e5"),v=t("4074"),g=t("cb32"),j=t("068f"),E=t("0170"),_=t("eb85"),S=t("8562"),x=t("429b"),C=t("7460"),F=t("adad"),H=t("823b"),w=t("1c1c"),T=t("4b7e"),Q=t("b047"),y=t("eebe"),k=t.n(y),I=Object(m["a"])(h,i,r,!1,null,"663437c8",null);e["default"]=I.exports;k()(I,"components",{QPage:p["a"],QCard:u["a"],QSkeleton:f["a"],QCardSection:b["a"],QItem:q["a"],QItemSection:v["a"],QAvatar:g["a"],QImg:j["a"],QItemLabel:E["a"],QSeparator:_["a"],QSplitter:S["a"],QTabs:x["a"],QTab:C["a"],QTabPanels:F["a"],QTabPanel:H["a"],QList:w["a"],QCardActions:T["a"],QChip:Q["a"]})}}]);