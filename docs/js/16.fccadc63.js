(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{5973:function(t,e,a){},"8a6b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("q-page",[i("q-pull-to-refresh",{on:{refresh:e.cargarEstudiantes}},[i("div",{staticClass:"row q-pt-lg"},[i("div",{staticClass:"col-12 col-xs-12 col-md-2 col-lg-2 "}),i("div",{staticClass:"row col-12 col-xs-12 col-md-12 col-lg-8 justify-center"},[i("div",{staticClass:"col-12 flex justify-between q-pl-sm q-pr-sm "},[i("div",{staticClass:"flex-center flex"},[i("q-btn",{attrs:{icon:"fas fa-th",flat:"",dense:"",color:e.vistaCuadricula?"blue":"grey-8"},on:{click:function(){e.vistaCuadricula||(t.vistaCuadricula=!0,t.vistaListado=!1,t.changeLocalVista({vistaCuadricula:!0,vistaListado:!1}),t.recargarFotoEstudiantes())}}}),i("q-btn",{attrs:{icon:"fas fa-bars",flat:"",dense:"",color:e.vistaListado?"blue":"grey-8"},on:{click:function(){e.vistaListado||(t.vistaCuadricula=!1,t.vistaListado=!0,t.changeLocalVista({vistaCuadricula:!1,vistaListado:!0}),t.recargarFotoEstudiantes())}}})],1),i("div",{staticClass:"flex"},[i("q-btn",{staticClass:"q-mr-md",attrs:{icon:"keyboard_arrow_down",color:"blue",label:e.$q.screen.gt.sm?"Añadir estudiantes":""}},[i("q-menu",{attrs:{fit:""}},[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"fas fa-users"}})],1),i("q-item-section",[e._v("Manual")])],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){e.addCSV=!0}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"fas fa-file-csv"}})],1),i("q-item-section",[e._v("\n                      Importar csv\n                    ")])],1)],1)],1)],1),i("q-input",{attrs:{color:"blue",dense:"",outlined:"",label:"Buscar estudiante"},on:{input:e.filterStudents},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"fas fa-user-tie",color:"blue"}})]},proxy:!0}]),model:{value:e.busquedaEstudiante,callback:function(t){e.busquedaEstudiante=t},expression:"busquedaEstudiante"}})],1)]),0===e.listadoEstudiantes.length&&e.estudiantesHanSidoCargados?i("div",{staticClass:"fixed-center text-center"},[i("p",[i("img",{staticStyle:{width:"30vw","max-width":"150px"},attrs:{src:a("c4e4"),alt:"imagen sad"}})]),i("p",{staticClass:"text-faded"},[e._v("\n            No hay ninguna estudiante en la bbdd.\n          ")])]):e._e(),e.estudiantesHanSidoCargados?e._e():i("div",{class:e.$q.screen.gt.md?"flex justify-between":"flex flex-center"},e._l(6,(function(t){return i("q-card",{key:t,class:e.$q.screen.gt.md?"lg-card-item q-ma-sm":"md-card-item q-ma-sm"},[i("q-skeleton",{attrs:{height:"150px",square:""}}),i("q-card-section",[i("q-skeleton",{staticClass:"absolute ",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{type:"circle"}}),i("div",{staticClass:"text-h6 q-mt-sm"},[i("q-skeleton",{attrs:{type:"text"}})],1),i("div",{staticClass:" text-grey-7 "},[i("q-skeleton",{attrs:{type:"text"}})],1)],1),i("q-card-section",{staticClass:"row"},[i("div",{staticClass:"col-6 flex"},[i("q-skeleton",{attrs:{type:"QAvatar"}})],1),i("div",{staticClass:"col-6 flex   content-center justify-end "},[i("q-skeleton",{staticStyle:{"flex-basis":"70%"},attrs:{type:"text"}})],1)]),i("q-card-actions",{staticClass:"justify-between no-wrap"},[i("q-skeleton",{attrs:{type:"QChip"}}),i("q-skeleton",{attrs:{type:"QBtn"}})],1)],1)})),1),0===e.listadoEstudiantes.length&&0===e.listadoEstudiantesFiltrados.length||!0!==e.vistaListado?e._e():i("div",{staticClass:"row q-mt-sm q-pa-sm col-12"},[i("q-list",{staticClass:"rounded-borders col-12 ",attrs:{bordered:""}},[i("q-item-label",{attrs:{header:""}},[e._v("Estudiantes")]),e._l(e.listadoEstudiantesFiltrados,(function(t){return i("q-item",{key:t.idusuario},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",[i("q-img",{attrs:{src:t.fotoPerfil,"placeholder-src":a("c15d"),"spinner-color":"primary",ratio:"1",alt:"Imagen perfil usuario"}})],1)],1),i("q-item-section",{staticClass:"col-2 "},[i("q-item-label",{staticClass:"text-weight-mediumn"},[e._v(e._s(t.nombre)+" "+e._s(t.apellidos)+"\n                ")])],1),e.$q.screen.gt.sm?i("q-item-section",{staticClass:"col-3"},[i("q-item-label",{staticClass:"justify-end flex"},[i("span",{staticClass:" text-grey-7"},[e._v(e._s(t.email))])])],1):e._e(),i("q-item-section",[t.trabajando&&!e.$q.dark.isActive?i("q-chip",{attrs:{square:"",color:"white","text-color":"green-7",icon:"fas fa-circle"}},[e._v("\n                  Trabajando\n                ")]):e._e(),t.trabajando||e.$q.dark.isActive?e._e():i("q-chip",{attrs:{square:"",color:"white","text-color":"grey-6",icon:"fas fa-circle"}},[e._v("\n                  No trabajando\n                ")]),t.trabajando&&e.$q.dark.isActive?i("q-chip",{attrs:{square:"","text-color":"green-6",icon:"fas fa-circle"}},[e._v("\n                  Trabajando\n                ")]):e._e(),!t.trabajando&&e.$q.dark.isActive?i("q-chip",{attrs:{square:"","text-color":"white",icon:"fas fa-circle"}},[e._v("\n                  No trabajando\n                ")]):e._e()],1),i("q-item-section",{attrs:{top:"",side:""}},[i("div",{staticClass:"text-grey-8 q-gutter-xs"},[null!=t.genero&&"hombre"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"30px","text-color":"white",icon:"fas fa-male"}},[i("q-tooltip",{attrs:{anchor:"center left",self:"center right","transition-show":"flip-right","transition-hide":"flip-left","content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                      Hombre\n                    ")])],1):e._e(),null!=t.genero&&"mujer"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"30px","text-color":"white",icon:"fas fa-female"}},[i("q-tooltip",{attrs:{anchor:"center left",self:"center right","transition-show":"flip-right","transition-hide":"flip-left","content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                      Mujer\n                    ")])],1):e._e(),null===t.genero||"indefinido"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"30px","text-color":"white",icon:"fas fa-horse"}},[i("q-tooltip",{attrs:{anchor:"center left",self:"center right","transition-show":"flip-right","transition-hide":"flip-left","content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                      Indefinido\n                    ")])],1):e._e(),i("q-btn",{attrs:{flat:"",size:"13px",color:"primary",icon:"fas fa-plus",dense:"",round:""}},[i("q-menu",{attrs:{anchor:"top right",self:"top left"}},[i("q-item",{attrs:{clickable:"",to:"estudiante/"+t.idusuario}},[i("q-item-section",[e._v("Ver estudiante")])],1),null!=t.empresa?i("q-separator",{attrs:{inset:""}}):e._e(),null!=t.empresa?i("q-item",{attrs:{clickable:"",to:"/profesor/empresa/"+t.empresa.idempresa}},[i("q-item-section",[e._v("Ver empresa")])],1):e._e()],1)],1)],1)])],1)}))],2)],1),0===e.listadoEstudiantes.length&&0===e.listadoEstudiantesFiltrados.length||!0!==e.vistaCuadricula?e._e():i("div",{class:e.$q.screen.gt.md?"flex justify-between":"flex flex-center"},e._l(e.listadoEstudiantesFiltrados,(function(t){return i("q-card",{key:t.idusuario,class:e.$q.screen.gt.md?"lg-card-item q-ma-sm":"md-card-item q-ma-sm"},[null!=t.genero&&"hombre"===t.genero.toLowerCase()||null===t.genero||"indefinido"===t.genero.toLowerCase()?i("q-img",{attrs:{src:t.fotoPerfil,"placeholder-src":a("c15d"),"spinner-color":"primary",ratio:16/9,alt:"Imagen de perfil de usuario hombre"}}):e._e(),null!=t.genero&&"mujer"===t.genero.toLowerCase()?i("q-img",{attrs:{src:t.fotoPerfil,"placeholder-src":a("df52"),"spinner-color":"primary",ratio:16/9,position:"50% 30%",alt:"Imagen de perfil de usuario mujer"}}):e._e(),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{"fab-mini":"",color:"primary",icon:"fas fa-plus",to:"estudiante/"+t.idusuario}}),i("div",{class:e.$q.screen.gt.sm?"text-h6":"text-body1 text-bold"},[e._v(e._s(t.nombre)+"\n                "+e._s(t.apellidos)+"\n              ")]),i("div",{staticClass:"text-grey-7 "},[e._v(e._s(t.email))])],1),i("q-card-section",{staticClass:"row"},[i("div",{staticClass:"col-6",attrs:{align:"left"}},[null!=t.genero&&"hombre"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"35px","text-color":"white",icon:"fas fa-male"}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                    Hombre\n                  ")])],1):e._e(),null!=t.genero&&"mujer"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"35px","text-color":"white",icon:"fas fa-female"}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                    Mujer\n                  ")])],1):e._e(),null===t.genero||"indefinido"===t.genero.toLowerCase()?i("q-avatar",{attrs:{color:"secondary",size:"35px","text-color":"white",icon:"fas fa-horse"}},[i("q-tooltip",{attrs:{"content-class":"bg-indigo",offset:[10,10]}},[e._v("\n                    Indefinido\n                  ")])],1):e._e()],1),i("div",{staticClass:"col-6",attrs:{align:"right"}},[i("q-avatar",{attrs:{size:"30px","text-color":"grey-14",icon:"fas fa-birthday-cake"}}),e._v("\n                "+e._s(t.dataNacimiento)+"\n                "),null===t.dataNacimiento?i("span",[e._v("N/A")]):e._e()],1)]),i("q-card-actions",{staticClass:"justify-between no-wrap"},[t.trabajando&&!e.$q.dark.isActive?i("q-chip",{attrs:{square:"",color:"white","text-color":"green-7",icon:"fas fa-circle"}},[e._v("\n                Trabajando\n              ")]):e._e(),t.trabajando||e.$q.dark.isActive?e._e():i("q-chip",{attrs:{square:"",color:"white","text-color":"grey-6",icon:"fas fa-circle"}},[e._v("\n                No trabajando\n              ")]),t.trabajando&&e.$q.dark.isActive?i("q-chip",{attrs:{square:"","text-color":"green-6",icon:"fas fa-circle"}},[e._v("\n                Trabajando\n              ")]):e._e(),!t.trabajando&&e.$q.dark.isActive?i("q-chip",{attrs:{square:"","text-color":"white",icon:"fas fa-circle"}},[e._v("\n                No trabajando\n              ")]):e._e(),null!=t.empresa||e.$q.dark.isActive?e._e():i("q-btn",{attrs:{dense:"",flat:"",label:"Sin empresa",disable:"",color:"grey-8"}}),null==t.empresa||e.$q.dark.isActive?e._e():i("q-btn",{attrs:{flat:"",label:t.empresa.nombre,color:"secondary",to:"/profesor/empresa/"+t.empresa.idempresa}}),null==t.empresa&&e.$q.dark.isActive?i("q-btn",{attrs:{dense:"",flat:"",label:"Sin empresa",disable:"","text-color":"white"}}):e._e(),null!=t.empresa&&e.$q.dark.isActive?i("q-btn",{attrs:{flat:"",label:t.empresa.nombre,color:"white",to:"/profesor/empresa/"+t.empresa.idempresa}}):e._e()],1)],1)})),1)])])]),i("q-dialog",{model:{value:e.addCSV,callback:function(t){e.addCSV=t},expression:"addCSV"}},[i("q-card",{staticClass:"column   "},[i("q-card-section",[i("div",{staticClass:"text-h5"},[e._v("Importar estudiantes")])]),i("q-separator"),i("q-card-section",[i("div",{staticClass:"text-h6 text-grey-8"},[e._v("\n          Formato csv\n        ")]),i("div",{staticClass:"text-subtitle2 text-grey-7"},[e._v("\n          El archivo csv, ha de cumplir el siguiente formato\n        ")]),i("div",{staticClass:"font-code q-mt-sm q-mb-md bg-grey-3 rounded-borders q-pa-md   items-center"},[e._v("\n          email,nombre,apellidos\n        ")]),i("div",{staticClass:"text-justify"},[e._v("\n          No importa el orden en el que esten las columnas, pero si que hemos de recibir por seguro, es la cabecera de\n          cada columna exactamente,\n          como esta establecido en el ejemplo. "),i("br"),i("span",{staticClass:"text-bold"},[e._v("Cada linea")]),e._v(" del archivo csv, se contará como un usuario "),i("span",{staticClass:"text-bold"},[e._v("individual")]),e._v(". Si por algun caso, no se puede añadir\n          un usuario en especifico o mas.\n          Se procederá a añadir todos los que si se puedan, y los que no se puedan, no se añadiran.\n          Los emails, han de ser "),i("span",{staticClass:"text-bold"},[e._v("unicos")]),e._v(".\n          "),i("br"),e._v("\n          A cada usuario que añadas, se le enviará un correo electronico a su dirección email.\n          con instrucciones detalladas de como continuar el proceso de registro.\n        ")])]),i("q-card-section",[i("q-uploader",{staticClass:"full-width",attrs:{url:e.urlUploadCSV,label:"Seleccionar o arrastrar csv",color:"grey-3","text-color":"black",accept:".csv","auto-upload":"",method:"POST","field-name":"file",headers:[{name:"Authorization",value:"Bearer "+e.token}],"with-credentials":!0},on:{uploaded:e.csvUploaded,failed:function(t){return e.csvFailed()}}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"red-8 "}})],1)],1)],1)],1)},i=[],o=a("fa84"),r=a.n(o),n=(a("6d67"),a("d25f"),a("2fdb"),a("6762"),a("967e")),l=a.n(n),c={name:"Estudiantes",data:function(){return{urlUploadCSV:"https://api.tresee.app/admin/estudiantes/upload/csv",token:localStorage.getItem("refreshToken"),addCSV:!1,listadoEstudiantes:{},listadoEstudiantesFiltrados:{},estudiantesHanSidoCargados:!1,busquedaEstudiante:"",vistaCuadricula:!1,vistaListado:!1}},created:function(){if(localStorage.getItem("vistaEstudiantes")){var t=JSON.parse(localStorage.getItem("vistaEstudiantes"));this.vistaCuadricula=t.vistaCuadricula,this.vistaListado=t.vistaListado}else localStorage.setItem("vistaEstudiantes",JSON.stringify({vistaCuadricula:!0,vistaListado:!1})),this.vistaCuadricula=!0;this.cargarEstudiantes()},methods:{csvFailed:function(){this.mostrarNotificacion("Ha habido un error al subir los usuarios","red-10",!1,"bottom-left")},csvUploaded:function(){var t=this;return r()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.addCSV=!1,t.mostrarNotificacion("Usuarios añadidos correctamente","indigo",!1,"bottom-left"),e.next=4,t.cargarEstudiantes();case 4:case"end":return e.stop()}}),e)})))()},changeLocalVista:function(t){localStorage.setItem("vistaEstudiantes",JSON.stringify(t))},mostrarNotificacion:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"indigo",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top-right";this.$q.notify({color:e,message:t,position:s,timeout:5e3,multiLine:a})},cargarEstudiantes:function(){var t=arguments,e=this;return r()(l.a.mark((function a(){var s,i;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:function(){return console.log("no has pasado cb")},e.estudiantesHanSidoCargados=!1,a.next=4,e.$axiosJava.get("/admin/estudiantes");case 4:i=a.sent,200===i.status&&(e.listadoEstudiantes=e.ordenarEstudiantes(i.data.map((function(t){return t.fichajes.length>0?t.trabajando=null===t.fichajes[t.fichajes.length-1].horaSalida:t.trabajando=!1,t}))),e.listadoEstudiantesFiltrados=e.listadoEstudiantes,e.estudiantesHanSidoCargados=!0),s();case 7:case"end":return a.stop()}}),a)})))()},ordenarEstudiantes:function(t){return t.sort((function(t,e){return t.nombre[0].toLowerCase()<e.nombre[0].toLowerCase()?-1:t.nombre[0].toLowerCase()>e.nombre[0].toLowerCase()?1:0}))},recargarFotoEstudiantes:function(){var t=this;return r()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.listadoEstudiantes.map((function(e){t.$axiosJava.get("/admin/estudiantes/".concat(e.idusuario,"/foto")).then((function(t){200===t.status&&(e.fotoPerfil=t.data)}))}));case 1:case"end":return e.stop()}}),e)})))()},filterStudents:function(t){t=t.toLowerCase(),this.listadoEstudiantesFiltrados=this.listadoEstudiantes.filter((function(e){return e.nombre.toLowerCase().includes(t)||e.apellidos.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)}))}}},d=c,u=(a("a257"),a("2877")),f=a("9989"),m=a("59d7"),p=a("9c40"),v=a("4e73"),q=a("1c1c"),g=a("66e5"),h=a("4074"),b=a("0016"),C=a("27f9"),x=a("f09f"),_=a("293e"),w=a("a370"),y=a("4b7e"),k=a("0170"),S=a("cb32"),j=a("068f"),E=a("b047"),L=a("05c0"),Q=a("eb85"),$=a("24e8"),A=a("ee89"),I=a("7f67"),N=a("eebe"),F=a.n(N),V=Object(u["a"])(d,s,i,!1,null,"8a586a5a",null);e["default"]=V.exports;F()(V,"components",{QPage:f["a"],QPullToRefresh:m["a"],QBtn:p["a"],QMenu:v["a"],QList:q["a"],QItem:g["a"],QItemSection:h["a"],QIcon:b["a"],QInput:C["a"],QCard:x["a"],QSkeleton:_["a"],QCardSection:w["a"],QCardActions:y["a"],QItemLabel:k["a"],QAvatar:S["a"],QImg:j["a"],QChip:E["a"],QTooltip:L["a"],QSeparator:Q["a"],QDialog:$["a"],QUploader:A["a"]}),F()(V,"directives",{ClosePopup:I["a"]})},a257:function(t,e,a){"use strict";var s=a("5973"),i=a.n(s);i.a}}]);