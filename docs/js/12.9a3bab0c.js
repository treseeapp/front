(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{3620:function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{class:a.$q.screen.lt.md?"bg-sm-image row":"bg-lg-image row"},[a.$q.screen.lt.md?a._e():t("div",{staticClass:"col-8 q-pa-md"},[t("q-date",{staticClass:"full-width full-height",attrs:{events:a.datasAllFichajes,"event-color":"primary","first-day-of-week":"1",color:"secondary",subtitle:"Calendario de fichajes","today-btn":""},model:{value:a.dataFichaje,callback:function(e){a.dataFichaje=e},expression:"dataFichaje"}})],1),t("div",{staticClass:"col-12 col-xs-12 col-sm-12 col-md-4 col-lg-4"},[t("q-tab-panels",{attrs:{animated:"",swipeable:""},model:{value:a.dataFichaje,callback:function(e){a.dataFichaje=e},expression:"dataFichaje"}},a._l(a.allFichajes,(function(e){return t("q-tab-panel",{attrs:{name:e.fecha}},[t("q-card",{staticStyle:{"min-height":"35vh"}},[t("q-card-section",{staticClass:"column"},[t("div",{staticClass:"flex justify-between items-center"},[t("div",{staticClass:"text-h4"},[a._v(a._s(e.fecha))]),a.$q.screen.lt.md?t("q-btn",{attrs:{color:"blue","icon-right":"event"}},[t("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t("q-date",{staticClass:"full-width",attrs:{"first-day-of-week":"1",color:"blue",subtitle:"Calendario de fichajes",options:a.datasAllFichajes},model:{value:a.dataFichaje,callback:function(e){a.dataFichaje=e},expression:"dataFichaje"}})],1)],1):a._e()],1),t("div",{staticClass:"caption text-grey-7 q-mb-md"},[a._v(a._s(e.fichajes.length+" fichaje(s)"))])]),t("q-card-section",[t("div",{staticClass:"row q-mb-sm"},[t("div",{staticClass:"col-3 flex justify-end"},[a._v("\n                Entrada  \n              ")]),t("div",{staticClass:"col-1 flex flex-center"}),t("div",{staticClass:"col-3 flex "},[a._v("\n                 Salida\n              ")])]),a._l(e.fichajes,(function(e){return t("div",{staticClass:"row q-mt-xs q-mb-xs"},[t("div",{staticClass:"col-3 flex justify-end"},[a._v("\n                "+a._s(e.entrada)+" \n              ")]),t("div",{staticClass:"col-1 flex flex-center"},[a._v("\n                -\n              ")]),t("div",{staticClass:"col-3 flex "},[a._v("\n                 "+a._s(e.salida)+"\n              ")]),t("div",{staticClass:"col-5 flex justify-end q-pr-lg"},[a._v("\n                "+a._s(a.diferenciaEntreHoras(e.entrada,e.salida))+" hora(s)\n              ")])])}))],2),t("q-separator",{attrs:{inset:""}}),t("q-card-section",{staticClass:"flex justify-end"},[a._v("\n            "+a._s(a.calcularHorasTotalesDeUnDia(e.fichajes))+" hora(s) totales\n\n          ")])],1)],1)})),1),t("q-card",{staticClass:"q-ma-md bg-grey-7 text-white"},[0===a.calcularHorasTotales(a.allFichajes)?t("q-card-section",{staticClass:"flex justify-between"},[t("div",{staticClass:"text-h5"},[a._v("\n          No has realizado ningún fichaje\n        ")])]):a._e(),0!=a.calcularHorasTotales(a.allFichajes)?t("q-card-section",{staticClass:"flex justify-between"},[t("div",{staticClass:"text-h5"},[a._v("\n          Horas totales fichadas\n        ")]),t("div",{staticClass:"text-h5"},[a._v(a._s(a.calcularHorasTotales(a.allFichajes))+"/400")])]):a._e()],1)],1)])},i=[],c=t("fa84"),l=t.n(c),n=t("967e"),r=t.n(n),o=(t("a481"),t("28a5"),{name:"Fichajes",data:function(){return{dataFichaje:"2019/02/01",allFichajes:[],datasAllFichajes:[]}},created:function(){var a=this;return l()(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.$axiosJava.get("/private/usuario");case 2:t=e.sent,200===t.status&&(s=[],t.data.fichajes.forEach((function(e){if(e.horaSalida){e.diaFichaje=e.diaFichaje.replace("-","/"),e.diaFichaje=e.diaFichaje.replace("-","/");var t={fecha:null,fichajes:[]},i={entrada:null,salida:null};0!==a.allFichajes.length&&a.allFichajes[a.allFichajes.length-1].fecha===e.diaFichaje?(i.entrada=e.horaEntrada,i.salida=e.horaSalida,a.allFichajes[a.allFichajes.length-1].fichajes.push(i)):(s.push(e.diaFichaje),t.fecha=e.diaFichaje,i.entrada=e.horaEntrada,i.salida=e.horaSalida,t.fichajes.push(i),a.allFichajes.push(t))}})),a.datasAllFichajes=s,a.dataFichaje=""+s[s.length-1]);case 4:case"end":return e.stop()}}),e)})))()},methods:{diferenciaEntreHoras:function(a,e){var t=a.split(":"),s=new Date;s.setHours(t[0]),s.setMinutes(t[1]),s.setSeconds(t[2]);var i=e.split(":"),c=new Date;return c.setHours(i[0]),c.setMinutes(i[1]),c.setSeconds(i[2]),Math.round(parseFloat((c-s)/1e3/3600))},calcularHorasTotalesDeUnDia:function(a){var e=this,t=0;return a.forEach((function(a){t+=e.diferenciaEntreHoras(a.entrada,a.salida)})),t},calcularHorasTotales:function(a){var e=this,t=0;return a.forEach((function(a){t+=e.calcularHorasTotalesDeUnDia(a.fichajes)})),t}}}),d=o,h=(t("3ad4"),t("2877")),u=t("9989"),f=t("52ee"),j=t("adad"),v=t("823b"),p=t("f09f"),F=t("a370"),b=t("9c40"),m=t("7cbe"),x=t("eb85"),C=t("eebe"),_=t.n(C),q=Object(h["a"])(d,s,i,!1,null,"610b4012",null);e["default"]=q.exports;_()(q,"components",{QPage:u["a"],QDate:f["a"],QTabPanels:j["a"],QTabPanel:v["a"],QCard:p["a"],QCardSection:F["a"],QBtn:b["a"],QPopupProxy:m["a"],QSeparator:x["a"]})},"3ad4":function(a,e,t){"use strict";var s=t("5a50"),i=t.n(s);i.a},"5a50":function(a,e,t){}}]);