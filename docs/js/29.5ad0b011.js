(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[29],{4618:function(a,e,t){"use strict";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{staticClass:"row q-pa-lg "},[t("div",{staticClass:"col-lg-8 col-md-8 col-sm-12 col-12 q-pa-lg"},[t("q-card",{staticClass:" q-ma-sm"},[t("q-card-section",{staticClass:"flex"},[t("div",{staticClass:"text-h5"},[a._v("Mi cuenta")]),t("q-space"),t("q-icon",{staticClass:"cursor-pointer",staticStyle:{"font-size":"2em"},attrs:{name:"info",color:"secondary"}},[t("q-tooltip",{attrs:{"content-class":"bg-purple","content-style":"font-size: 13px",offset:[10,10]}},[a._v("\n            Para editar la informacion, modifica el campo que quieras modificar y despues pulsa 'Guardar'\n          ")])],1)],1),t("q-separator"),t("q-card-section",[t("div",{staticClass:"text-h6 text-grey-6"},[a._v("Informacion del usuario")]),t("div",{staticClass:"row"},[t("q-input",{staticClass:"q-pa-sm col-lg-4 col-md-4 col-sm-4 col-12",attrs:{outlined:"",label:"Nombre",placeholder:"John",color:"secondary"},model:{value:a.usuario.nombre,callback:function(e){a.$set(a.usuario,"nombre",e)},expression:"usuario.nombre"}}),t("q-input",{staticClass:"q-pa-sm col-lg-6 col-md-6 col-sm-6 col-12",attrs:{outlined:"",label:"Apellidos",placeholder:"Doe",color:"secondary"},model:{value:a.usuario.apellidos,callback:function(e){a.$set(a.usuario,"apellidos",e)},expression:"usuario.apellidos"}})],1),t("div",{staticClass:"row"},[t("q-input",{staticClass:"q-pa-sm col-lg-5 col-md-5 col-sm-10 col-12",attrs:{"input-class":"text-grey-6",outlined:"",type:"email",label:"Email",readonly:"",color:"secondary"},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"far fa-envelope"}})]},proxy:!0}]),model:{value:a.usuario.email,callback:function(e){a.$set(a.usuario,"email",e)},expression:"usuario.email"}},[t("q-tooltip",{staticClass:"justify-center",attrs:{"content-class":"bg-red-9 content-center","content-style":"font-size: 0.9em",delay:500,offset:[0,5]}},[t("q-icon",{attrs:{name:"fas fa-exclamation-circle",size:"0.9em"}}),a._v("\n              Correo electronico no modificable\n            ")],1)],1),t("q-input",{staticClass:"col-lg-3 col-md-3 col-sm-5 col-12 q-pa-sm",attrs:{outlined:"",mask:"####/##/##",label:"Fecha de nacimiento",color:"secondary"},on:{click:function(){return a.$refs.qDateProxy.show()}},scopedSlots:a._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[t("q-popup-proxy",{ref:"qDateProxy"},[t("q-date",{attrs:{color:"accent","first-day-of-week":"1"},on:{input:function(){return a.$refs.qDateProxy.hide()}},model:{value:a.usuario.dataNacimiento,callback:function(e){a.$set(a.usuario,"dataNacimiento",e)},expression:"usuario.dataNacimiento"}})],1)],1)]},proxy:!0}]),model:{value:a.usuario.dataNacimiento,callback:function(e){a.$set(a.usuario,"dataNacimiento",e)},expression:"usuario.dataNacimiento"}},[t("q-tooltip",{attrs:{anchor:"bottom right",self:"bottom right",offset:[-10,35],"content-class":"bg-accent","content-style":"font-size: 12px"}},[a._v("\n              Pulsa el icono\n              "),t("q-icon",{attrs:{name:"fas fa-level-up-alt"}})],1)],1),t("q-select",{staticClass:"col-lg-2 col-md-2 col-sm-5 col-12 q-pa-sm",attrs:{outlined:"",options:a.opcionesSexo,label:"Sexo",color:"secondary"},model:{value:a.usuario.genero,callback:function(e){a.$set(a.usuario,"genero",e)},expression:"usuario.genero"}})],1)]),t("q-card-section",{staticClass:"q-mt-md"},[t("div",{staticClass:"text-h6 text-grey-6"},[a._v("\n          Dirección\n          "),t("q-icon",{attrs:{name:"far fa-address-card"}})],1),t("div",{staticClass:"row"},[t("q-input",{staticClass:" col-lg-7 col-md-7 col-sm-7 col-12 q-pa-sm",attrs:{outlined:"",label:"Calle",type:"text",color:"secondary"},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-road"}})]},proxy:!0}]),model:{value:a.direccion.calle,callback:function(e){a.$set(a.direccion,"calle",e)},expression:"direccion.calle"}}),t("q-input",{staticClass:" col-lg-3 col-md-3 col-sm-3 col-12 q-pa-sm ",attrs:{outlined:"",label:"Número piso",type:"number",color:"secondary"},model:{value:a.direccion.numero,callback:function(e){a.$set(a.direccion,"numero",e)},expression:"direccion.numero"}})],1),t("div",{staticClass:"q-mb-md row"},[t("q-input",{staticClass:" col-lg-3 col-md-3 col-sm-3 col-12  q-pa-sm",attrs:{outlined:"",label:"Código postal",type:"number",color:"secondary"},model:{value:a.direccion.zip,callback:function(e){a.$set(a.direccion,"zip",e)},expression:"direccion.zip"}}),t("q-input",{staticClass:" col-lg-4 col-md-4 col-sm-4 col-12 q-pa-sm",attrs:{outlined:"",label:"Ciudad",type:"text",color:"secondary"},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-city"}})]},proxy:!0}]),model:{value:a.direccion.ciudad,callback:function(e){a.$set(a.direccion,"ciudad",e)},expression:"direccion.ciudad"}}),t("q-input",{staticClass:" col-lg-3 col-md-3 col-sm-3 col-12 q-pa-sm",attrs:{outlined:"",label:"País",type:"text",color:"secondary"},scopedSlots:a._u([{key:"prepend",fn:function(){return[t("q-icon",{attrs:{name:"fas fa-globe-americas"}})]},proxy:!0}]),model:{value:a.direccion.pais,callback:function(e){a.$set(a.direccion,"pais",e)},expression:"direccion.pais"}})],1)]),t("q-card-actions",{staticClass:"q-pr-md q-pb-md",attrs:{align:"right"}},[t("q-btn",{attrs:{dense:"",outline:"",color:"green-9",label:"Guardar cambios"},on:{click:a.guardarInformacionPerfil}})],1)],1),"local"===this.usuario.modoInicioSesion?t("q-card",{staticClass:"q-mt-lg q-ma-sm"},[t("q-card-section",{staticClass:"flex"},[t("div",{staticClass:"text-h5"},[a._v("Seguridad")]),t("q-space"),t("q-icon",{staticClass:"cursor-pointer",staticStyle:{"font-size":"2em"},attrs:{name:"info",color:"secondary"}},[t("q-tooltip",{attrs:{"content-class":"bg-purple","content-style":"font-size: 13px",offset:[10,10]}},[a._v("\n            Para editar la informacion, modifica el campo que quieras modificar y despues pulsa 'Guardar'\n          ")])],1)],1),t("q-separator"),t("q-card-section",[t("div",{staticClass:"text-h6 text-grey-6"},[a._v("Modifcar contraseña")]),t("div",{staticClass:"row"},[t("q-input",{staticClass:"q-pa-sm col-lg-5 col-md-5 col-sm-5 col-12",attrs:{outlined:"",label:"Antigua contraseña",placeholder:"*******************",color:"secondary"},model:{value:a.contraseñas.old,callback:function(e){a.$set(a.contraseñas,"old",e)},expression:"contraseñas.old"}}),t("q-input",{staticClass:"q-pa-sm col-lg-5 col-md-5 col-sm-5 col-12",attrs:{outlined:"",label:"Nueva contraseña",placeholder:"*******************",color:"secondary"},model:{value:a.contraseñas.nueva,callback:function(e){a.$set(a.contraseñas,"nueva",e)},expression:"contraseñas.nueva"}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"q-pa-sm col-lg-5 col-md-5 col-sm-5 col-12"}),t("q-input",{staticClass:"q-pa-sm col-lg-5 col-md-5 col-sm-5 col-12",attrs:{outlined:"",label:"Repetir contraseña",placeholder:"*******************",color:"secondary",rules:[function(e){return a.contraseñas.nueva===a.contraseñas.nueva2||"Las contraseñas no coinciden"}]},model:{value:a.contraseñas.nueva2,callback:function(e){a.$set(a.contraseñas,"nueva2",e)},expression:"contraseñas.nueva2"}})],1)]),t("q-card-actions",{staticClass:"q-pr-md q-pb-md",attrs:{align:"right"}},[t("q-btn",{attrs:{dense:"",outline:"",color:"green-9",label:"Guardar cambios"},on:{click:a.guardarInfoSeguridad}})],1)],1):a._e()],1),t("div",{staticClass:"col-lg-4 col-md-4 col-sm-12 col-12 q-pa-lg column"},[t("q-card",{staticClass:"column  content-center q-ma-sm"},[t("q-card-section",{staticClass:"flex flex-center"},[t("div",{staticClass:"text-h6 text-grey-6"},[a._v("Fotografia de perfil")])]),t("q-card-section",{staticClass:"flex flex-center"},[t("q-avatar",{attrs:{size:"13em"}},[t("q-img",{attrs:{src:a.usuario.foto,ratio:1,alt:"Imagen de perfil del usuario","placeholder-src":"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcRr1v58ICPpgv8t4zeWFfmJqBre8Xedi8agxMpKEHR-G5L06sic","spinner-color":"primary"}})],1)],1),a.editarFoto?t("q-card-section",[t("q-uploader",{staticStyle:{"max-width":"240px"},attrs:{color:"indigo",label:"Arrastra o selecciona tu foto (MAX 10MB)","auto-upload":"",fieldName:"file","max-file-size":10485760}})],1):a._e(),t("q-card-actions",{staticClass:"q-pr-md q-pb-md",attrs:{align:"center"}},[a.editarFoto?t("q-btn",{attrs:{outline:"",color:"negative",label:"Cancelar cambio",icon:"fas fa-ban"},on:{click:a.editFoto}}):a._e(),a.editarFoto?a._e():t("q-btn",{attrs:{flat:"",color:"secondary",label:"Cambiar foto",icon:"far fa-edit"},on:{click:a.editFoto}})],1)],1),t("q-btn",{staticClass:"q-ma-sm",attrs:{label:"Eliminar cuenta",color:"negative",outline:""},on:{click:function(e){a.borrarCuenta=!0}}})],1),t("q-dialog",{model:{value:a.borrarCuenta,callback:function(e){a.borrarCuenta=e},expression:"borrarCuenta"}},[t("q-card",{staticClass:"my-card"},[t("q-card-section",{staticClass:"q-pt-sm"},[t("div",{staticClass:"text-h6"},[a._v("\n          Eliminar cuenta\n        ")]),t("div",{staticClass:"text-subtitle2"},[a._v("\n          Introduce tu email para eliminar la cuenta\n        ")]),t("div",{staticClass:"text-grey-7"},[a._v("\n          Para verificar que esta acción es voluntaria te pedimos que\n          nos escribas tu correo electronico con el que estas registrado\n        ")])]),t("q-separator"),t("q-card-section",{},[t("q-input",{attrs:{outlined:"",dense:"",color:"secondary",placeholder:a.usuario.email,rules:[function(e){return null!=a.emailToDelete||"Campo requerido"},function(e){return""!==a.emailToDelete||"Campo requerido"}],"lazy-rules":""},model:{value:a.emailToDelete,callback:function(e){a.emailToDelete=e},expression:"emailToDelete"}}),t("div",{staticClass:"q-pt-md"},[a._v("\n          ¿Estas seguro de borrar tu cuenta?\n          Esta acción "),t("span",{staticClass:"text-negative text-weight-bolder"},[a._v("no se puede deshacer")]),a._v(".\n          Si en el futuro quieres volver a utilizar esta aplicacion, tendras que crearte otra cuenta.\n\n          "),t("div",{staticClass:"text-weight-bolder"},[a._v("\n            Perderas todos tus fichajes y se te desvinculara de tu empresa.\n          ")])])],1),t("q-separator"),t("q-card-actions",{attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"accent",label:"Cancelar"}}),a.usuario.email!==a.emailToDelete?t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",disable:"",color:"negative",label:"Borrar cuenta"}}):a._e(),a.usuario.email===a.emailToDelete?t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"negative",label:"Borrar cuenta"},on:{click:a.deleteAccount}}):a._e()],1)],1)],1)],1)},s=[],c=t("fa84"),i=t.n(c),r=(t("28a5"),t("a481"),t("967e")),n=t.n(r),l=(t("c1df"),{name:"Account",created:function(){var a=this;return i()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.parserDirection("Carrer Cabana, 31, 07141, Marratxi, España");case 1:case"end":return e.stop()}}),e)})))()},data:function(){return{parserMoment:null,booleano:!0,emailToDelete:null,borrarCuenta:!1,urlUploadProfileFoto:"https://api.tresee.app/private/usuario/foto",tokenToUploadFoto:"",editarFoto:!1,opcionesSexo:["HOMBRE","MUJER","INDEFINIDO"],usuario:{nombre:"Demo",email:"demouser@tresee.app",apellidos:"User",direccion:"",dataNacimiento:"1998/12/17",genero:"HOMBRE",foto:"https://cdn.quasar.dev/img/boy-avatar.png",modoInicioSesion:"local"},"contraseñas":{old:"",nueva:"",nueva2:""},direccion:{calle:"",numero:null,zip:null,ciudad:"",pais:""}}},methods:{editFoto:function(){this.editarFoto=!this.editarFoto},fotoSubida:function(){var a=this;return i()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.mostrarNotificacion("Foto actualizada","green");case 1:case"end":return e.stop()}}),e)})))()},guardarInformacionPerfil:function(){var a=this;return i()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.usuario.direccion=a.direccion.calle+", "+a.direccion.numero+", "+a.direccion.zip+", "+a.direccion.ciudad+", "+a.direccion.pais,null===a.usuario.genero&&(a.usuario.genero=" "),a.mostrarNotificacion("Se ha guardado la informacion correctamente","secondary");case 3:case"end":return e.stop()}}),e)})))()},guardarInfoSeguridad:function(){var a=this;return i()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.mostrarNotificacion("Se ha guardado la informacion correctamente","secondary");case 1:case"end":return e.stop()}}),e)})))()},parserDirection:function(a){var e=a.split(",");this.direccion.calle=e[0],this.direccion.numero=parseInt(e[1]),this.direccion.zip=parseInt(e[2]),e[3]&&(this.direccion.ciudad=e[3].replace(/\s/g,"")),e[4]&&(this.direccion.pais=e[4].replace(/\s/g,""))},mostrarNotificacion:function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:indigo;this.$q.notify({color:e,message:a,position:"top-right",timeout:5e3})}}}),u=l,d=t("2877"),p=t("9989"),m=t("f09f"),f=t("a370"),q=t("2c91"),v=t("0016"),b=t("05c0"),g=t("eb85"),C=t("27f9"),x=t("7cbe"),y=t("52ee"),h=t("ddd8"),k=t("4b7e"),w=t("9c40"),_=t("cb32"),S=t("068f"),N=t("ee89"),D=t("24e8"),z=t("7f67"),I=t("eebe"),$=t.n(I),P=Object(d["a"])(u,o,s,!1,null,"1d5e7532",null);e["default"]=P.exports;$()(P,"components",{QPage:p["a"],QCard:m["a"],QCardSection:f["a"],QSpace:q["a"],QIcon:v["a"],QTooltip:b["a"],QSeparator:g["a"],QInput:C["a"],QPopupProxy:x["a"],QDate:y["a"],QSelect:h["a"],QCardActions:k["a"],QBtn:w["a"],QAvatar:_["a"],QImg:S["a"],QUploader:N["a"],QDialog:D["a"]}),$()(P,"directives",{ClosePopup:z["a"]})}}]);